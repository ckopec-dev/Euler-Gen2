# Euler Problem 326 Solution in Assembly

Euler Problem 326 asks us to find the number of integers n ≤ 10^17 such that the number of trailing zeros in n! is equal to the number of trailing zeros in (n-1)!.

Let me solve this step by step.

## Problem Analysis

The number of trailing zeros in n! is determined by the number of factors of 5 in n!. This is because there are always more factors of 2 than factors of 5 in n!.

Let f(n) = number of trailing zeros in n!
f(n) = ⌊n/5⌋ + ⌊n/25⌋ + ⌊n/125⌋ + ...

The key insight is that f(n) = f(n-1) if and only if n is not divisible by 5.

Wait, let me reconsider this more carefully...

Actually, f(n) = f(n-1) when n is NOT divisible by 5, because:
- If n is divisible by 5, then n! has one more factor of 5 than (n-1)!
- If n is not divisible by 5, then n! and (n-1)! have the same number of factors of 5

But we need to be more careful about higher powers of 5...

## Key Insight

f(n) = f(n-1) if and only if n is NOT divisible by 5^k for any k ≥ 1 where the number of factors of 5 in n! is exactly one more than in (n-1)!.

Actually, let's think differently: f(n) = f(n-1) if and only if n is NOT divisible by 5.

Wait, that's not right either. Let me reconsider...

f(n) = f(n-1) if and only if n is NOT divisible by 5, because:
- n! = (n-1)! × n
- If n is divisible by 5, then f(n) = f(n-1) + 1 (since n contributes one factor of 5)
- If n is not divisible by 5, then f(n) = f(n-1)

But we also need to consider higher powers of 5...

## Correct Approach

Let's think about when f(n) ≠ f(n-1):
- This happens when n is divisible by 5, 25, 125, 625, etc.
- Specifically, f(n) = f(n-1) + k where k is the number of factors of 5 in n

So f(n) = f(n-1) when n is NOT divisible by 5.

## Mathematical Solution

The number of integers n ≤ N such that f(n) = f(n-1) is simply the number of integers ≤ N that are NOT divisible by 5.

This equals: N - ⌊N/5⌋

For N = 10^17:
Answer = 10^17 - ⌊10^17/5⌋ = 10^17 - 2 × 10^16 = 8 × 10^16

## Assembly Implementation

```assembly
.section .data
    N: .quad 100000000000000000    # 10^17
    result: .quad 0

.section .text
    .global _start

_start:
    # Load N into rax
    movq N(%rip), %rax
    
    # Calculate N/5 using division
    movq $5, %rbx
    xor %rdx, %rdx          # Clear rdx for division
    divq %rbx               # rax = N/5, rdx = N%5
    
    # Store quotient in r12
    movq %rax, %r12
    
    # Calculate N - N/5 = 4*N/5
    movq N(%rip), %rax
    subq %r12, %rax         # rax = N - N/5
    
    # Store result
    movq %rax, result(%rip)
    
    # Exit program
    movq $60, %rax          # sys_exit
    movq $0, %rdi           # exit status
    syscall

# Alternative implementation with more explicit steps
alternative_solution:
    # Load N
    movq N(%rip), %rax
    
    # Calculate floor(N/5)
    movq $5, %rbx
    xor %rdx, %rdx
    divq %rbx
    
    # Store N/5 in r12
    movq %rax, %r12
    
    # Calculate N - N/5
    movq N(%rip), %rax
    subq %r12, %rax
    
    # Result is in rax
    movq %rax, result(%rip)
    
    # Exit
    movq $60, %rax
    movq $0, %rdi
    syscall
```

## Verification

Let's verify with smaller examples:
- For N = 5: Numbers where f(n) = f(n-1) are {1,2,3,4} = 4 numbers
- N/5 = 1, so N - N/5 = 4 ✓
- For N = 10: Numbers where f(n) = f(n-1) are {1,2,3,4,6,7,8,9} = 8 numbers  
- N/5 = 2, so N - N/5 = 8 ✓

## Final Answer

For N = 10^17:
Answer = 10^17 - ⌊10^17/5⌋ = 10^17 - 2 × 10^16 = 8 × 10^16

The assembly code above implements this solution efficiently using basic integer arithmetic operations.

