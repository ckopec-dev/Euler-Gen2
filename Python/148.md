# Euler Problem 148 Solution

## Problem Statement
We can easily verify that none of the entries in the first seven rows of Pascal's triangle are divisible by 7. However, when we look at row 8, we find that 8!/(4!×4!) = 70, which is divisible by 7. Also, when we look at row 9, we find that 9!/(4!×5!) = 126 = 2×63 = 2×9×7, which is also divisible by 7.

The first 10 rows of Pascal's triangle are:
```
1
1 1
1 2 1
1 3 3 1
1 4 6 4 1
1 5 10 10 5 1
1 6 15 20 15 6 1
1 7 21 35 35 21 7 1
1 8 28 56 70 56 28 8 1
1 9 36 84 126 126 84 36 9 1
```

Let us call the entry in the nth row and kth column of Pascal's triangle C(n,k). It has been proven that there are only 23 entries not divisible by 7 in the first 100 rows of Pascal's triangle.

How many entries of C(n,k) are not divisible by 7, for 0 ≤ k ≤ n < 10^9?

## Solution Approach

This is a classic application of Lucas' Theorem for prime numbers. For a prime p, the number of entries in the first n rows of Pascal's triangle that are not divisible by p can be calculated using the formula:

If n = d₀ + d₁p + d₂p² + ... + dₖpᵏ (base p representation of n), then the number of entries not divisible by p is:
∏(dᵢ + 1) × (p^(k+1) - 1)/(p - 1)

For our case with p = 7 and n = 10⁹, we need to:
1. Convert 10⁹ to base 7
2. Apply the formula

Let me implement this step by step:

```python
def solve():
    # Convert 10^9 to base 7
    n = 10**9
    base_7_digits = []
    
    while n > 0:
        base_7_digits.append(n % 7)
        n //= 7
    
    # Apply Lucas' theorem formula
    # For each digit d in base 7 representation of n,
    # we multiply by (d + 1)
    result = 1
    for digit in base_7_digits:
        result *= (digit + 1)
    
    return result

# Calculate the result
answer = solve()
print(answer)
```

Wait, let me reconsider the problem. Looking more carefully at the mathematical approach:

```python
def count_non_divisible_entries(n, p):
    """
    Count entries in first n rows of Pascal's triangle not divisible by prime p
    using Lucas' theorem
    """
    # Convert n to base p
    base_p_digits = []
    temp_n = n
    
    while temp_n > 0:
        base_p_digits.append(temp_n % p)
        temp_n //= p
    
    # Apply the formula: product of (digit + 1) for each digit
    result = 1
    for digit in base_p_digits:
        result *= (digit + 1)
    
    return result

# For the problem: n = 10^9, p = 7
n = 10**9
p = 7

# Convert 10^9 to base 7
base_7_digits = []
temp_n = n
while temp_n > 0:
    base_7_digits.append(temp_n % 7)
    temp_n //= 7

# Calculate result
result = 1
for digit in base_7_digits:
    result *= (digit + 1)

print(f"Answer: {result}")
```

Let me trace this properly by converting 10^9 to base 7:

```python
def solve_euler_148():
    n = 10**9
    p = 7
    
    # Convert n to base p
    digits = []
    temp = n
    
    while temp > 0:
        digits.append(temp % p)
        temp //= p
    
    # Apply Lucas' theorem formula
    result = 1
    for digit in digits:
        result *= (digit + 1)
    
    return result

# Execute solution
answer = solve_euler_148()
print(answer)
```

Let me compute this step by step:

```python
# Convert 10^9 to base 7
n = 10**9
digits = []

temp = n
while temp > 0:
    digits.append(temp % 7)
    temp //= 7

print(f"10^9 in base 7: {digits}")
print(f"Product: {1}")
result = 1
for i, digit in enumerate(digits):
    result *= (digit + 1)
    print(f"Digit {i}: {digit}, (digit+1) = {digit+1}, running product = {result}")

print(f"Final answer: {result}")
```

## Final Answer

Let me compute the actual conversion:

10^9 = 1,000,000,000

Converting to base 7:
- 1,000,000,000 ÷ 7 = 142,857,142 remainder 6
- 142,857,142 ÷ 7 = 20,408,163 remainder 1  
- 20,408,163 ÷ 7 = 2,915,451 remainder 6
- 2,915,451 ÷ 7 = 416,493 remainder 0
- 416,493 ÷ 7 = 59,499 remainder 0
- 59,499 ÷ 7 = 8,499 remainder 6
- 8,499 ÷ 7 = 1,214 remainder 1
- 1,214 ÷ 7 = 173 remainder 3
- 173 ÷ 7 = 24 remainder 5
- 24 ÷ 7 = 3 remainder 3
- 3 ÷ 7 = 0 remainder 3

So 10^9 in base 7 is: 3353100616

Applying the formula: (3+1) × (3+1) × (5+1) × (3+1) × (1+1) × (0+1) × (0+1) × (6+1) × (1+1) × (6+1)

= 4 × 4 × 6 × 4 × 2 × 1 × 1 × 7 × 2 × 7 = 107,520

```python
def solve_euler_148():
    # 10^9 in base 7 is 3353100616
    # So we compute (3+1)(3+1)(5+1)(3+1)(1+1)(0+1)(0+1)(6+1)(1+1)(6+1)
    digits = [3, 3, 5, 3, 1, 0, 0, 6, 1, 6]
    result = 1
    for digit in digits:
        result *= (digit + 1)
    return result

print(solve_euler_148())
```

**Answer: 107520**

