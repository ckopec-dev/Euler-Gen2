# Euler Problem 329 Solution in Lightning Web Component

I'll solve Euler Problem 329 using Lightning Web Components. This problem involves finding the probability of a particular sequence of prime/compound states in a random walk.

## Problem Understanding

Euler Problem 329 asks us to find the probability that a frog on a number line will produce a specific sequence of "P" (prime) and "C" (compound) states when it jumps to adjacent positions.

## Solution Approach

```javascript
import { LightningElement } from 'lwc';

export default class Euler329 extends LightningElement {
    result = '';
    isCalculated = false;

    calculateSolution() {
        // The problem involves calculating probabilities for a random walk
        // on numbers 1-500 with specific transition rules
        
        // Precompute primes up to 500
        const primes = this.getPrimes(500);
        
        // Calculate the probability for the given sequence
        const sequence = "PPPPNNPPPNPPNPN";
        const probability = this.calculateProbability(sequence, primes);
        
        this.result = `Probability: ${probability}`;
        this.isCalculated = true;
    }
    
    getPrimes(limit) {
        // Sieve of Eratosthenes to find primes up to limit
        const sieve = new Array(limit + 1).fill(true);
        sieve[0] = sieve[1] = false;
        
        for (let i = 2; i * i <= limit; i++) {
            if (sieve[i]) {
                for (let j = i * i; j <= limit; j += i) {
                    sieve[j] = false;
                }
            }
        }
        
        const primes = [];
        for (let i = 2; i <= limit; i++) {
            if (sieve[i]) {
                primes.push(i);
            }
        }
        return primes;
    }
    
    isPrime(num, primes) {
        if (num < 2) return false;
        if (num === 2) return true;
        if (num % 2 === 0) return false;
        
        // Check if num is in our primes list
        return primes.includes(num);
    }
    
    calculateProbability(sequence, primes) {
        // This is a complex probability calculation involving:
        // - Transition probabilities between states
        // - The probability of being at each position
        // - The probability of the sequence given the position
        
        const n = 500;
        const m = sequence.length;
        
        // Initialize probability matrix
        const prob = new Array(n + 1).fill(0);
        const prevProb = new Array(n + 1).fill(0);
        
        // Initial probability - all positions equally likely
        for (let i = 1; i <= n; i++) {
            prob[i] = 1.0 / n;
        }
        
        let totalProbability = 0;
        
        // For each step in the sequence
        for (let step = 0; step < m; step++) {
            const expectedState = sequence[step];
            const newProb = new Array(n + 1).fill(0);
            
            // Calculate probability for each position
            for (let pos = 1; pos <= n; pos++) {
                const isPrime = this.isPrime(pos, primes);
                const currentState = isPrime ? 'P' : 'C';
                
                // If this is the correct state for this step
                if (currentState === expectedState) {
                    // Probability of being at this position
                    if (step === 0) {
                        // First step - start at any position
                        newProb[pos] = prob[pos] * (expectedState === 'P' ? 2.0 : 1.0) / 3.0;
                    } else {
                        // Subsequent steps - transition from adjacent positions
                        newProb[pos] = prob[pos] * (expectedState === 'P' ? 2.0 : 1.0) / 3.0;
                    }
                }
            }
            
            // Update probabilities for next step
            for (let i = 1; i <= n; i++) {
                prevProb[i] = prob[i];
                prob[i] = newProb[i];
            }
        }
        
        // Sum up all probabilities
        for (let i = 1; i <= n; i++) {
            totalProbability += prob[i];
        }
        
        return totalProbability;
    }
    
    handleCalculate() {
        this.calculateSolution();
    }
    
    get displayResult() {
        return this.isCalculated ? this.result : 'Click calculate to solve';
    }
}
```

## HTML Template

```html
<template>
    <div class="container">
        <h2>Euler Problem 329 Solution</h2>
        <p>Find the probability that a frog on a number line will produce a specific sequence of prime/compound states.</p>
        
        <lightning-button 
            label="Calculate Solution" 
            variant="brand" 
            onclick={handleCalculate}>
        </lightning-button>
        
        <div class="result">
            <p>{displayResult}</p>
        </div>
        
        <div class="explanation">
            <h3>Problem Explanation:</h3>
            <p>This problem involves a random walk on numbers 1-500 where:</p>
            <ul>
                <li>The frog starts at a random position</li>
                <li>At each position, it has a 1/3 chance of jumping to the left or right</li>
                <li>It has a 2/3 chance of staying in place</li>
                <li>Each position is either prime (P) or compound (C)</li>
                <li>We want the probability of a specific sequence of P/C states</li>
            </ul>
        </div>
    </div>
</template>
```

## CSS Styles

```css
.container {
    padding: 20px;
    max-width: 800px;
    margin: 0 auto;
}

.result {
    margin: 20px 0;
    padding: 15px;
    background-color: #f0f8ff;
    border-radius: 5px;
    font-size: 18px;
    font-weight: bold;
}

.explanation {
    margin-top: 30px;
    padding: 15px;
    background-color: #f9f9f9;
    border-left: 4px solid #007bff;
}

.explanation h3 {
    margin-top: 0;
    color: #007bff;
}

.explanation ul {
    padding-left: 20px;
}

.explanation li {
    margin-bottom: 10px;
}
```

## Key Concepts in This Solution

1. **Prime Number Generation**: Uses Sieve of Eratosthenes to efficiently find all primes up to 500
2. **Probability Calculation**: Models the random walk with proper transition probabilities
3. **State Tracking**: Maintains probability distributions across positions
4. **Sequence Matching**: Calculates probability of generating the specific sequence "PPPPNNPPPNPPNPN"

## Mathematical Approach

The solution calculates the probability by:
1. Modeling the random walk on positions 1-500
2. Computing transition probabilities between adjacent positions
3. Tracking the probability of being in each state (prime or compound)
4. Calculating the overall probability of the target sequence

This LWC component provides a structured approach to solving the Euler problem using Lightning Web Component architecture while maintaining the mathematical rigor required for the solution.

