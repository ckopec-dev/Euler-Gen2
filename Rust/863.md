# Euler Problem 863 Solution in Rust

I need to solve Euler Problem 863, which asks for the sum of all integers n ≤ 10^12 such that n is divisible by 3 and the sum of digits of n is divisible by 3.

Let me think through this step by step:

1. For a number to be divisible by 3, the sum of its digits must be divisible by 3
2. Since we're looking for numbers divisible by 3 where the digit sum is also divisible by 3, we're essentially looking for numbers where both conditions are satisfied
3. But wait - if a number is divisible by 3, then by definition, the sum of its digits is divisible by 3
4. So we're looking for all multiples of 3 that are ≤ 10^12

Actually, let me re-read the problem carefully. The problem asks for numbers n ≤ 10^12 such that:
- n is divisible by 3
- The sum of digits of n is divisible by 3

But this is actually redundant! A number is divisible by 3 if and only if the sum of its digits is divisible by 3.

So the answer is simply the sum of all multiples of 3 that are ≤ 10^12.

Let me calculate this:
- The multiples of 3 that are ≤ 10^12 are: 3, 6, 9, 12, ..., 10^12
- The largest multiple of 3 that is ≤ 10^12 is 10^12 (since 10^12 is divisible by 3)
- The count of multiples of 3 from 1 to 10^12 is floor(10^12 / 3) = 10^12 / 3 = 333,333,333,333
- The sum of arithmetic sequence 3 + 6 + 9 + ... + 10^12 = 3 × (1 + 2 + 3 + ... + 333,333,333,333) = 3 × (333,333,333,333 × 333,333,333,334) / 2

Wait, let me reconsider. 10^12 = 1,000,000,000,000, and 1,000,000,000,000 ÷ 3 = 333,333,333,333.333..., so the largest multiple of 3 ≤ 10^12 is 333,333,333,333 × 3 = 1,000,000,000,000 - 1 = 999,999,999,999.

Let me double-check: 10^12 = 1,000,000,000,000
1,000,000,000,000 ÷ 3 = 333,333,333,333.333...
So the largest multiple of 3 ≤ 10^12 is 333,333,333,333 × 3 = 1,000,000,000,000 - 1 = 999,999,999,999.

Actually, 10^12 is divisible by 3? 10^12 = 1,000,000,000,000. Sum of digits = 1. Since 1 is not divisible by 3, 10^12 is not divisible by 3.

So we need to find the largest multiple of 3 that is ≤ 10^12.

Since 10^12 = 1,000,000,000,000, and 1+0+0+0+...+0 = 1, which is not divisible by 3, we need to find the largest multiple of 3 that is ≤ 10^12.

10^12 - 1 = 999,999,999,999. Sum of digits = 9×12 = 108, which is divisible by 3.
So 10^12 - 1 is divisible by 3.

So the multiples of 3 that are ≤ 10^12 are: 3, 6, 9, ..., 999,999,999,999.

The count is (999,999,999,999 / 3) = 333,333,333,333.

The sum is 3 × (1 + 2 + 3 + ... + 333,333,333,333) = 3 × (333,333,333,333 × 333,333,333,334) / 2.

Let me implement this in Rust:

```rust
fn main() {
    let limit: u128 = 1_000_000_000_000;
    
    // Find the largest multiple of 3 that is <= limit
    let largest_multiple = limit - (limit % 3);
    
    // Count of multiples of 3 from 1 to largest_multiple
    let count = largest_multiple / 3;
    
    // Sum of arithmetic sequence: 3 + 6 + 9 + ... + largest_multiple
    // = 3 * (1 + 2 + 3 + ... + count)
    // = 3 * count * (count + 1) / 2
    let sum = 3 * count * (count + 1) / 2;
    
    println!("Sum: {}", sum);
}
```

Wait, let me verify this is correct. The largest multiple of 3 ≤ 10^12 is 999,999,999,999.
This is 3 × 333,333,333,333.
The sum is 3 × (1 + 2 + ... + 333,333,333,333) = 3 × 333,333,333,333 × 333,333,333,334 / 2.

Let me calculate this more carefully:

```rust
fn main() {
    let limit: u128 = 1_000_000_000_000;
    
    // Find the largest multiple of 3 that is <= limit
    let largest_multiple = limit - (limit % 3);
    
    // Count of multiples of 3 from 1 to largest_multiple
    let count = largest_multiple / 3;
    
    // Sum of arithmetic sequence: 3 + 6 + 9 + ... + largest_multiple
    // = 3 * (1 + 2 + 3 + ... + count)
    // = 3 * count * (count + 1) / 2
    let sum = 3 * count * (count + 1) / 2;
    
    println!("Sum: {}", sum);
}
```

But wait, let me double-check what 10^12 is modulo 3:
10^12 = 1,000,000,000,000
Sum of digits = 1, so 10^12 ≡ 1 (mod 3)
So 10^12 is not divisible by 3.
The largest multiple of 3 ≤ 10^12 is 10^12 - 1 = 999,999,999,999.
This is divisible by 3 since sum of digits = 12 × 9 = 108, which is divisible by 3.

So the count of multiples of 3 ≤ 10^12 is 999,999,999,999 / 3 = 333,333,333,333.

The sum is 3 × (1 + 2 + ... + 333,333,333,333) = 3 × 333,333,333,333 × 333,333,333,334 / 2.

Let me compute this:

```rust
fn main() {
    let limit: u128 = 1_000_000_000_000;
    
    // Find the largest multiple of 3 that is <= limit
    let largest_multiple = limit - (limit % 3);
    
    // Count of multiples of 3 from 1 to largest_multiple
    let count = largest_multiple / 3;
    
    // Sum of arithmetic sequence: 3 + 6 + 9 + ... + largest_multiple
    // = 3 * (1 + 2 + 3 + ... + count)
    // = 3 * count * (count + 1) / 2
    let sum = 3 * count * (count + 1) / 2;
    
    println!("Sum: {}", sum);
}
```

Let me verify with a smaller example:
For n = 10:
- Multiples of 3 ≤ 10: 3, 6, 9
- Count = 3
- Sum = 3 + 6 + 9 = 18
- Using formula: 3 × 3 × 4 / 2 = 18 ✓

This looks correct.

```rust
fn main() {
    let limit: u128 = 1_000_000_000_000;
    
    // Find the largest multiple of 3 that is <= limit
    let largest_multiple = limit - (limit % 3);
    
    // Count of multiples of 3 from 1 to largest_multiple
    let count = largest_multiple / 3;
    
    // Sum of arithmetic sequence: 3 + 6 + 9 + ... + largest_multiple
    // = 3 * (1 + 2 + 3 + ... + count)
    // = 3 * count * (count + 1) / 2
    let sum = 3 * count * (count + 1) / 2;
    
    println!("Sum: {}", sum);
}
```

