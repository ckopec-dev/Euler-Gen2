# Euler Problem 102 Solution in Lua

## Problem Statement
Three distinct points are plotted at random on a Cartesian plane, where -1000 ≤ x, y ≤ 1000, such that a triangle is formed.

Consider the following two triangles:
- Triangle 1: (-340,495), (-153,-910), (835,-947)
- Triangle 2: (-175,41), (-421,-714), (574,-647)

It can be verified that triangle 1 contains the origin, whereas triangle 2 does not.

Using triangles.txt (right click and 'Save Link/Target As...'), a 27K text file containing the co-ordinates of one thousand "random" triangles, find the number of triangles for which the interior contains the origin.

## Solution Approach
The key insight is to use the barycentric coordinate method or the cross product method to determine if the origin (0,0) is inside a triangle. I'll use the cross product approach:

For a triangle with vertices A, B, C, the origin is inside the triangle if and only if the origin is on the same side of each edge as the third vertex.

## Lua Implementation

```lua
function readTriangles(filename)
    local triangles = {}
    local file = io.open(filename, "r")
    
    for line in file:lines() do
        local coords = {}
        for x, y, z, w in line:gmatch("(-?%d+),(-?%d+),(-?%d+),(-?%d+),(-?%d+),(-?%d+)") do
            table.insert(coords, {tonumber(x), tonumber(y)})
            table.insert(coords, {tonumber(z), tonumber(w)})
            table.insert(coords, {tonumber(x), tonumber(y)})
        end
        table.insert(triangles, coords)
    end
    
    file:close()
    return triangles
end

function crossProduct(ax, ay, bx, by, cx, cy)
    -- Calculate cross product of vectors (ax,ay)-(bx,by) and (bx,by)-(cx,cy)
    local v1x = ax - bx
    local v1y = ay - by
    local v2x = bx - cx
    local v2y = by - cy
    return v1x * v2y - v1y * v2x
end

function containsOrigin(triangle)
    local x1, y1 = triangle[1][1], triangle[1][2]
    local x2, y2 = triangle[2][1], triangle[2][2]
    local x3, y3 = triangle[3][1], triangle[3][2]
    
    -- Calculate cross products for each edge
    local c1 = crossProduct(x1, y1, x2, y2, 0, 0)
    local c2 = crossProduct(x2, y2, x3, y3, 0, 0)
    local c3 = crossProduct(x3, y3, x1, y1, 0, 0)
    
    -- Check if all cross products have the same sign
    -- (all positive or all negative)
    return (c1 > 0 and c2 > 0 and c3 > 0) or (c1 < 0 and c2 < 0 and c3 < 0)
end

function solve()
    -- Read triangles from file
    local triangles = readTriangles("triangles.txt")
    
    local count = 0
    for _, triangle in ipairs(triangles) do
        if containsOrigin(triangle) then
            count = count + 1
        end
    end
    
    return count
end

-- Execute the solution
print("Number of triangles containing the origin: " .. solve())
```

## Alternative Simpler Approach

```lua
function readTriangleFile(filename)
    local triangles = {}
    local file = io.open(filename, "r")
    
    for line in file:lines() do
        local coords = {}
        for x, y in line:gmatch("(-?%d+),(-?%d+)") do
            table.insert(coords, {tonumber(x), tonumber(y)})
        end
        table.insert(triangles, coords)
    end
    
    file:close()
    return triangles
end

function sign(x)
    return x > 0 and 1 or x < 0 and -1 or 0
end

function containsOriginSimple(triangle)
    local x1, y1 = triangle[1][1], triangle[1][2]
    local x2, y2 = triangle[2][1], triangle[2][2]
    local x3, y3 = triangle[3][1], triangle[3][2]
    
    -- Calculate signs of cross products
    local d1 = sign(y2 - y1) * (x3 - x1) - sign(x2 - x1) * (y3 - y1)
    local d2 = sign(y3 - y2) * (x1 - x2) - sign(x3 - x2) * (y1 - y2)
    local d3 = sign(y1 - y3) * (x2 - x3) - sign(x1 - x3) * (y2 - y3)
    
    -- If all signs are the same, origin is inside
    return (d1 == d2) and (d2 == d3)
end

function solveSimple()
    local triangles = readTriangleFile("triangles.txt")
    local count = 0
    
    for _, triangle in ipairs(triangles) do
        if containsOriginSimple(triangle) then
            count = count + 1
        end
    end
    
    return count
end

-- Execute solution
print("Number of triangles containing the origin: " .. solveSimple())
```

## Corrected and Final Solution

```lua
function readTriangles(filename)
    local triangles = {}
    local file = io.open(filename, "r")
    
    for line in file:lines() do
        local coords = {}
        local x1, y1, x2, y2, x3, y3 = line:match("(-?%d+),(-?%d+),(-?%d+),(-?%d+),(-?%d+),(-?%d+)")
        table.insert(coords, {tonumber(x1), tonumber(y1)})
        table.insert(coords, {tonumber(x2), tonumber(y2)})
        table.insert(coords, {tonumber(x3), tonumber(y3)})
        table.insert(triangles, coords)
    end
    
    file:close()
    return triangles
end

function crossProduct(ax, ay, bx, by, cx, cy)
    -- Cross product of vectors (ax,ay)-(bx,by) and (bx,by)-(cx,cy)
    local v1x = ax - bx
    local v1y = ay - by
    local v2x = bx - cx
    local v2y = by - cy
    return v1x * v2y - v1y * v2x
end

function containsOrigin(triangle)
    local x1, y1 = triangle[1][1], triangle[1][2]
    local x2, y2 = triangle[2][1], triangle[2][2]
    local x3, y3 = triangle[3][1], triangle[3][2]
    
    -- Calculate cross products for each edge
    local c1 = crossProduct(x1, y1, x2, y2, 0, 0)
    local c2 = crossProduct(x2, y2, x3, y3, 0, 0)
    local c3 = crossProduct(x3, y3, x1, y1, 0, 0)
    
    -- Check if all cross products have the same sign (both positive or both negative)
    -- This means the origin is on the same side of each edge as the opposite vertex
    return (c1 > 0 and c2 > 0 and c3 > 0) or (c1 < 0 and c2 < 0 and c3 < 0)
end

function solve()
    local triangles = readTriangles("triangles.txt")
    local count = 0
    
    for _, triangle in ipairs(triangles) do
        if containsOrigin(triangle) then
            count = count + 1
        end
    end
    
    return count
end

print("Answer: " .. solve())
```

The solution uses the cross product method to determine if the origin (0,0) is inside each triangle. For each triangle, we compute the cross products of the vectors formed by the triangle's edges and the origin, then check if all cross products have the same sign, which indicates that the origin is inside the triangle.

