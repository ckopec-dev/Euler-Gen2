# Euler Problem 21 Solution in COBOL

Euler Problem 21 asks us to find the sum of all amicable numbers under 10000. Two numbers are amicable if each is equal to the sum of the proper divisors of the other.

## Problem Analysis
- Find all amicable pairs where both numbers are less than 10000
- Proper divisors of a number are all positive divisors excluding the number itself
- Sum all unique amicable numbers

## COBOL Solution

```cobol
       IDENTIFICATION DIVISION.
       PROGRAM-ID. EULER21.
       AUTHOR. Euler Solution.

       ENVIRONMENT DIVISION.
       CONFIGURATION SECTION.
       SOURCE-COMPUTER. IBM-370.
       OBJECT-COMPUTER. IBM-370.

       DATA DIVISION.
       WORKING-STORAGE SECTION.
       01  N                        PIC 9(5) VALUE 10000.
       01  I                        PIC 9(5).
       01  J                        PIC 9(5).
       01  SUM-DIVS                 PIC 9(5).
       01  SUM-DIVS2                PIC 9(5).
       01  AMICABLE-SUM             PIC 9(6) VALUE 0.
       01  TEMP                     PIC 9(5).
       01  FOUND-AMICABLE           PIC 9 VALUE 0.
       01  DIVS-TABLE.
           05  DIVS-ITEM             PIC 9(5) OCCURS 100 TIMES.
       01  DIVS-COUNT               PIC 9(3) VALUE 0.
       01  DIVS-FLAG                PIC 9(5) VALUE 0.
       01  WORK-TABLE.
           05  WORK-ITEM             PIC 9(5) OCCURS 10000 TIMES.

       PROCEDURE DIVISION.
       MAIN-LOGIC.
           PERFORM INITIALIZE-WORK-TABLE
           PERFORM CALCULATE-SUMS
           PERFORM FIND-AMICABLE-NUMBERS
           DISPLAY "Sum of amicable numbers: " AMICABLE-SUM
           STOP RUN.

       INITIALIZE-WORK-TABLE.
           MOVE 0 TO WORK-ITEM(1) THRU WORK-ITEM(10000).

       CALCULATE-SUMS.
           PERFORM VARYING I FROM 1 BY 1 UNTIL I > N
               MOVE 0 TO SUM-DIVS
               PERFORM CALCULATE-SUM-DIVISORS
               MOVE SUM-DIVS TO WORK-ITEM(I)
           END-PERFORM.

       CALCULATE-SUM-DIVISORS.
           PERFORM VARYING J FROM 1 BY 1 UNTIL J >= I
               IF I MOD J = 0
                   ADD J TO SUM-DIVS
               END-IF
           END-PERFORM.

       FIND-AMICABLE-NUMBERS.
           PERFORM VARYING I FROM 1 BY 1 UNTIL I >= N
               MOVE WORK-ITEM(I) TO SUM-DIVS
               IF SUM-DIVS > 0 AND SUM-DIVS < N
                   MOVE WORK-ITEM(SUM-DIVS) TO SUM-DIVS2
                   IF SUM-DIVS2 = I AND I <> SUM-DIVS
                       ADD I TO AMICABLE-SUM
                   END-IF
               END-IF
           END-PERFORM.
```

## Alternative Cleaner Implementation

```cobol
       IDENTIFICATION DIVISION.
       PROGRAM-ID. EULER21.
       AUTHOR. Euler Solution.

       ENVIRONMENT DIVISION.
       CONFIGURATION SECTION.
       SOURCE-COMPUTER. IBM-370.
       OBJECT-COMPUTER. IBM-370.

       DATA DIVISION.
       WORKING-STORAGE SECTION.
       01  LIMIT                    PIC 9(5) VALUE 10000.
       01  I                        PIC 9(5).
       01  J                        PIC 9(5).
       01  SUM-OF-DIVS              PIC 9(5).
       01  SUM-OF-DIVS2             PIC 9(5).
       01  TOTAL-SUM                PIC 9(6) VALUE 0.
       01  TEMP                     PIC 9(5).

       PROCEDURE DIVISION.
       MAIN-LOGIC.
           PERFORM COMPUTE-AMICABLE-SUMS
           DISPLAY "Sum of amicable numbers: " TOTAL-SUM
           STOP RUN.

       COMPUTE-AMICABLE-SUMS.
           PERFORM VARYING I FROM 1 BY 1 UNTIL I >= LIMIT
               MOVE 0 TO SUM-OF-DIVS
               PERFORM CALCULATE-DIVISOR-SUM
               IF SUM-OF-DIVS > 0 AND SUM-OF-DIVS < LIMIT
                   MOVE 0 TO SUM-OF-DIVS2
                   PERFORM CALCULATE-DIVISOR-SUM2
                   IF SUM-OF-DIVS2 = I AND I <> SUM-OF-DIVS
                       ADD I TO TOTAL-SUM
                   END-IF
               END-IF
           END-PERFORM.

       CALCULATE-DIVISOR-SUM.
           PERFORM VARYING J FROM 1 BY 1 UNTIL J >= I
               IF I MOD J = 0
                   ADD J TO SUM-OF-DIVS
               END-IF
           END-PERFORM.

       CALCULATE-DIVISOR-SUM2.
           PERFORM VARYING J FROM 1 BY 1 UNTIL J >= SUM-OF-DIVS
               IF SUM-OF-DIVS MOD J = 0
                   ADD J TO SUM-OF-DIVS2
               END-IF
           END-PERFORM.
```

## Explanation

This COBOL program solves Euler Problem 21 by:

1. **Main Logic**: Iterates through all numbers from 1 to 9999
2. **Divisor Sum Calculation**: For each number, finds the sum of all proper divisors
3. **Amicable Check**: Checks if the sum of divisors of a number equals another number, and vice versa
4. **Summation**: Adds qualifying amicable numbers to the total sum

## Key Features

- Uses nested loops to calculate divisor sums
- Implements the amicable number condition (a ≠ b and σ(a) = b, σ(b) = a)
- Properly handles the constraint that numbers must be less than 10000
- Includes proper variable declarations and initialization

## Expected Output

The sum of all amicable numbers under 10000 is **31626**.

This solution efficiently identifies the amicable pairs (220,284) and (1184,1210) and sums them accordingly.

